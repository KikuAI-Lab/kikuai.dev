# –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–æ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É** (37.27.38.186) - –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
2. **Docker –∏ Docker Compose** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π**:
   - `/srv/kikuai-site` - –≥–æ—Ç–æ–≤ –¥–ª—è —Ñ–∞–π–ª–æ–≤ —Å–∞–π—Ç–∞
   - `/srv/kikuai-docs` - –≥–æ—Ç–æ–≤ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
   - `/srv/kikuai-stubs` - –≥–æ—Ç–æ–≤ –¥–ª—è API stubs
   - `/root/kikuai-platform/` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
4. **Caddy –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
   - Dockerfile —Å Cloudflare DNS plugin
   - Caddyfile –Ω–∞—Å—Ç—Ä–æ–µ–Ω
5. **Docker Compose** - —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –∏ –≥–æ—Ç–æ–≤
6. **DNS –∑–∞–ø–∏—Å–∏** - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

## ‚è≥ –û—Å—Ç–∞–ª–æ—Å—å

1. **Cloudflare API Token** - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `.env` —Ñ–∞–π–ª
2. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤** - –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞

## üîß –ö–∞–∫ –∑–∞–≤–µ—Ä—à–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
./scripts/auto-complete-migration.sh
```

–°–∫—Ä–∏–ø—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ —Ç–æ–∫–µ–Ω, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ë—ã—Å—Ç—Ä—ã–π (–µ—Å–ª–∏ —Ç–æ–∫–µ–Ω —É–∂–µ –µ—Å—Ç—å)

```bash
./scripts/quick-setup.sh YOUR_CLOUDFLARE_API_TOKEN
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –í—Ä—É—á–Ω—É—é

```bash
ssh root@37.27.38.186
cd /root/kikuai-platform
echo 'CLOUDFLARE_API_TOKEN=your_token_here' > .env
chmod 600 .env
docker compose build
docker compose up -d
```

## üîë –ì–¥–µ –≤–∑—è—Ç—å Cloudflare API Token

1. **–ò–∑ GitHub Secrets** (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø):
   - https://github.com/KikuAI-Lab/kikuai.dev/settings/secrets/actions
   - –ù–∞–π–¥–∏—Ç–µ `CLOUDFLARE_API_TOKEN`

2. **–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π**:
   - https://dash.cloudflare.com/profile/api-tokens
   - –°–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω —Å –ø—Ä–∞–≤–∞–º–∏: **Zone DNS Edit** –¥–ª—è –¥–æ–º–µ–Ω–∞ `kikuai.dev`

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
ssh root@37.27.38.186 'cd /root/kikuai-platform && docker compose ps'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
ssh root@37.27.38.186 'cd /root/kikuai-platform && docker compose logs caddy'

# –¢–µ—Å—Ç health endpoint
curl http://37.27.38.186/healthz
curl https://kikuai.dev/healthz  # –ø–æ—Å–ª–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- DNS –∑–∞–ø–∏—Å–∏ —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- –°–∞–π—Ç –¥–µ–ø–ª–æ–∏—Ç—Å—è —á–µ—Ä–µ–∑ Cloudflare Pages, –ø–æ—ç—Ç–æ–º—É `/srv/kikuai-site` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º
- Caddy –±—É–¥–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –≤ `/srv/kikuai-site`
- Uptime Kuma –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `https://status.kikuai.dev` –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞

